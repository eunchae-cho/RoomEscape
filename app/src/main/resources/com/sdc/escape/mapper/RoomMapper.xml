<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="com.sdc.escape.dao.RoomDao">
  
    <resultMap type="room" id="RoomMap">
        <id column="r_no" property="no"></id>
        <result column="r_title" property="title"></result>
        <result column="r_content" property="content"></result>
        <result column="r_level" property="level"></result>
        <result column="r_participant" property="participant"></result>
         <result column="r_photo" property="photo"></result>
    </resultMap>
   
    <select id="findAll" resultMap="RoomMap">
    	select
    		r_no,
    		r_title,
    		r_content,
    			case  
    				when r_level=3 then ' ⭐ ⭐ ⭐'
    				when r_level=4 then ' ⭐ ⭐ ⭐ ⭐'
    				when r_level=5 then ' ⭐ ⭐ ⭐ ⭐ ⭐'
    			else '☆☆☆☆☆'
    			end as r_level,
    		r_participant,
    		r_photo
    	from escape_room 
    </select>
    
    <select id="findByNo" resultMap="RoomMap" parameterType="int">
    	select
    		r_no,
    		r_title,
    		r_content,
	    		case  
	    				when r_level=3 then ' ⭐ ⭐ ⭐'
	    				when r_level=4 then ' ⭐ ⭐ ⭐ ⭐'
	    				when r_level=5 then ' ⭐ ⭐ ⭐ ⭐ ⭐'
	    			else '☆☆☆☆☆'
	    			end as r_level,
    		r_participant,
    		r_photo
    	from escape_room 
    	where r_no = #{no}
    </select>
  </mapper>